{% extends "base.html" %}
{% block title %}Service Arrangements{% endblock %}
{% block content %}

<h2>Service Arrangements by Day</h2>

{% if session['sid'] %}
    <div>
        <strong>Service ID:</strong> {{ session['sid'] }}
    </div>
    <br>
{% endif %}

<form method="post">
    <table border="1">
        <thead>
            <tr>
                <th>Day</th>
                <th>Default Service Period</th>
                <th>At Service Base</th>
                <th>At Client Location</th>
                <th>At Other Location</th>
            </tr>
        </thead>
        <tbody>
            {% for day in ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'] %}
                {% set row = arrangements.get(day) %}
                <tr>
                    <td><strong>{{ day }}</strong></td>
                    {% if day in "Saturday Sunday" %}
                        <td><input type="text" name="{{ day }}_default" value="{{ row.defaultserviceperiod if row else 'As agreed if required' }}"></td>
                        <td><input type="text" name="{{ day }}_base" value="{{ row.atservicebase if row else 'As agreed if required' }}"></td>
                        <td><input type="text" name="{{ day }}_client" value="{{ row.atclientlocation if row else 'As agreed if required' }}"></td>
                        <td><input type="text" name="{{ day }}_other" value="{{ row.atotherlocation if row else 'Prior approval required' }}"></td>
                    {% else %}
                        <td><input type="text" name="{{ day }}_default" value="{{ row.defaultserviceperiod if row else 'As specified 0800 - 1800' }}"></td>
                        <td><input type="text" name="{{ day }}_base" value="{{ row.atservicebase if row else 'As specified' }}"></td>
                        <td><input type="text" name="{{ day }}_client" value="{{ row.atclientlocation if row else 'As specified' }}"></td>
                        <td><input type="text" name="{{ day }}_other" value="{{ row.atotherlocation if row else 'Prior approval required' }}"></td>
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <form action="/servicestandards" method="post">   
        <label for="SpecialConditions" class="index-label"><strong>Special conditions</strong></label>    
        <div>
            <textarea name="SpecialConditions" rows="8" cols="100" class="multi-line">{{ contract.specialconditions }}</textarea>     
        </div> 
        <br>
        <button type="submit" class="button">Save Changes</button>
        <a href="{{ url_for('index') }}" class="button">Back</a>
        
    </form>
</form>

{% endblock %}
